name: 每日AI新闻简报

on:
  schedule:
    - cron: '0 0 * * *'  # 每天北京时间 8:00 运行
  workflow_dispatch:     # 允许手动触发测试

jobs:
  generate-news:
    runs-on: ubuntu-latest
    steps:
      - name: 安装依赖
        run: |
          sudo apt-get update
          sudo apt-get install -y curl jq

      - name: 生成今日AI新闻
        id: generate_news
        run: |
          # 定义新闻生成的提示词
          PROMPT="你是贾维斯。请生成今天最新的AI新闻简报，只包含Agent、MCP、大模型方向，每条标注日期，总共5条以内，不要多余格式。"
          
          # 调用豆包API生成新闻（这里使用模拟响应，实际部署时可替换为真实API调用）
          # 注意：以下为模拟响应，实际使用时需要接入真实的AI服务API
          NEWS_CONTENT="【贾维斯 AI 日报】
          $(date +%Y-%m-%d) Agent、MCP、大模型 最新动态：
          1. OpenAI 强化 MCP 协议标准化，多Agent协作稳定性提升30%
          2. Claude Code 支持100万token上下文，代码Agent调试能力大幅提升
          3. 开源Agent框架爆发，MCP成为行业通用协作标准
          4. 大模型推理成本持续下降，端侧AI部署成本降低40%
          5. 企业开始大规模落地AI Agent替代重复工作，效率提升5倍"
          
          # 将新闻内容写入文件并设置为输出
          echo "$NEWS_CONTENT" > news.txt
          echo "content=$(cat news.txt)" >> $GITHUB_OUTPUT

      - name: 输出新闻内容
        run: |
          echo "${{ steps.generate_news.outputs.content }}"
